<!DOCTYPE html>
<html>
<head>
    <script language="JavaScript" type="text/javascript" src="/js/jquery-1.2.6.min.js"></script>
    <script language="JavaScript" type="text/javascript" src="/js/jquery-ui-personalized-1.5.2.packed.js"></script>
    <script language="JavaScript" type="text/javascript" src="/js/sprinkle.js"></script>
</head>
<body>
<div class="test-container test-two">
    <h1>test</h1>
</div>
<div class="by-card contract-detail">
    <div class="by-card__head flex v-center f-12">
        <div class="cd-head full flex space-between">
            <div class="f-12 semi-bold gc-08 cd-head__title">Contract Details&nbsp;BTCUSD</div>
        </div>
    </div>
</div>

<div class="calculator">
    <h2>Calculator</h2>
    <div class="wrapper">
        <div class="calculator__inner">
            <input type="number" name="btc" class="currencyField" placeholder="BTC">
            <div class="arrow" style="margin: 0 10px";>=</div>
            <input type="number" name="usd" class="currencyField" placeholder="USD">
        </div>
    </div>
</div>

<script>
    (function () {
        function textBox() {
            var box = document.createElement("div");
            box.classList = "btc-dollar-wrapper wrapper";
            box.innerHTML = "X btc = x dollar";
            document.querySelector(".test-container").appendChild(box);
        }

        textBox();
    })();

</script>

<script>
    $(".currencyField").keyup(function(){ //input[name='calc']
        let convFrom;
        if($(this).prop("name") == "btc") {
            convFrom = "btc";
            convTo = "usd";
        }
        else {
            convFrom = "usd";
            convTo = "btc";
        }
        $.getJSON( "https://api.coindesk.com/v1/bpi/currentprice/usd.json",
            function( data) {
                var origAmount = parseFloat($("input[name='" + convFrom + "']").val());
                var exchangeRate = parseInt(data.bpi.USD.rate_float);
                let amount;
                if(convFrom == "btc")
                    amount = parseFloat(origAmount * exchangeRate);
                else
                    amount = parseFloat(origAmount/ exchangeRate);
                $("input[name='" + convTo + "']").val(amount.toFixed(2));
            });
    });
</script>


</body>
</html>

<style>
    html {
        background: lightgrey;
    }

    .wrapper {
        padding: 10px;
        border-radius: 4px;
        background-color: darkslategray;
        font-size: 12px;
        margin-bottom: 20px;
        width: fit-content;
        color: white;
    }



</style>