<!DOCTYPE html>
<html>
<head>
    <script language="JavaScript" type="text/javascript" src="/js/jquery-1.2.6.min.js"></script>
    <script language="JavaScript" type="text/javascript" src="/js/jquery-ui-personalized-1.5.2.packed.js"></script>
    <script language="JavaScript" type="text/javascript" src="init.js"></script>
</head>
<body>
<div class="by-modal show-darkModal" id="popup">
    <div class="test-container test-two your_class">
        <div class="test">
            <p class="oc__row-desc oc__row-bottom--16 tpsl-modal__tips-desc">
                Last Traded Price to 49,089.0 will trigger market Take Profit order; your expected profit will be
                0.00039567 BTC&nbsp;&nbsp;ROI:22.38%</p>
        </div>
    </div>
</div>

<div class="by-card contract-detail">
    <div class="by-card__head flex v-center f-12">
        <div class="cd-head full flex space-between">
            <div class="f-12 semi-bold gc-08 cd-head__title">Contract Details&nbsp;BTCUSD</div>
        </div>
    </div>
</div>

<div class="calculator">
    <h2>Calculator</h2>
    <div class="wrapper">
        <div class="calculator__inner">
            <input type="number" name="btc" class="currencyField" placeholder="BTC">
            <div class="arrow" style="margin: 0 10px" ;>=</div>
            <input type="number" name="usd" class="currencyField" placeholder="USD">
        </div>
    </div>
</div>

<div class="btc-dollar-wrapper">
    <tr data-row-key="58514024" class="ant-table-row ant-table-row-level-0">
        <td class="ant-table-cell"><span style="color: rgb(247, 73, 123);">-0.00036772</span></td>
    </tr>
</div>

<div class="test-container test-two">

</div>

<script>
    (function () {
        function textBox() {
            var content = document.querySelector('.tpsl-modal__tips-desc')
            var scrapedBTCValue = content.textContent.match(/[0-9].[0-9]{8}/);
            var btcValue = scrapedBTCValue[0];

            var box = document.createElement("div");
            box.classList = "btc-dollar-wrapper wrapper";
            box.innerHTML = btcValue + " = x dollar";
            document.querySelector(".test-container").appendChild(box);

            console.log(btcValue);
        }

        textBox();
    })();

    var elemToObserve = document.getElementById('popup');
    var prevClassState = elemToObserve.classList.contains('your_class');
    var observer = new MutationObserver(function (mutations) {
        mutations.forEach(function (mutation) {
            if (mutation.attributeName == "your_class") {
                var currentClassState = mutation.target.classList.contains('your_class');
                if (prevClassState !== currentClassState) {
                    prevClassState = currentClassState;
                    if (currentClassState)
                        console.log("class added!");
                    else
                        console.log("class removed!");
                }
            }
        });
    });
    observer.observe(elemToObserve, {attributes: true});
</script>

<script>
    (function () {
        function pnlConverter() {
            var box = document.createElement("div");
            box.classList = "btc-dollar-wrapper";
            box.innerHTML = "X btc = x dollar";
            document.querySelector("td.ant-table-cell").appendChild(box);
        }

        pnlConverter();
    })();
</script>

<script>
    (function () {
        function textBox() {
            var box = document.createElement("div");
            box.classList = "btc-dollar-wrapper wrapper";
            box.innerHTML = "X btc = x dollar";
            document.querySelector(".test-container").appendChild(box);
        }

        textBox();
    })();
</script>

<!--<script>-->
<!--    (function () {-->
<!--        function textBox() {-->
<!--            var box = document.createElement("div");-->
<!--            box.classList = "btc-dollar-wrapper wrapper";-->
<!--            box.innerHTML = "X btc = x dollar";-->
<!--            document.querySelector(".test-container").appendChild(box);-->
<!--        }-->

<!--        textBox();-->
<!--    })();-->
<!--</script>-->


</body>
</html>

<style>
    html {
        background: lightgrey;
    }

    .wrapper {
        padding: 10px;
        border-radius: 4px;
        background-color: darkslategray;
        font-size: 12px;
        margin-bottom: 20px;
        width: fit-content;
        color: white;
    }


</style>